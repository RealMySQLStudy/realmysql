# 3장 사용자 및 권한

# 사용자 식별

## 식별

### 식별기본

- 계정명@IP
    - 해당 IP에서 해당 계정명을 통해 접근해야만 접근허가
- 예시
    
    ```sql
    'svc_id'@'127.0.0.1'
    ```
    

### 여러개의 계정명

- 가장 범위가 좁은 계정명을 기준으로 사용

# 사용자 계정 관리

## 시스템 계정 일반 계정

- 시스템 계정과 일반계정을 나눔
- 전자는 DBA의 역할, 후자는 응용에 SQL을 쏘는 역할

### 특수목적 내장계정 (built-in)

- mysql.sys
    - sys 스키마를 정의하는 주체
- mysql.session
    - MYSQL 플러그인이 서버로 접근할때 사용
- mysql.infoschema
    - information_schema 내부의 뷰를 정의하는 역할

## 계정 생성

- CREATE USER
    - IDENTIFIED WITH : 인증 방식 hash에 따른 플러그인 존재, ex) password
    - REQUIRE : 암호화 채널 사용여부
    - PASSWORD EXPIRE : 유효기간
    - PASSWORD HISTORY : 비밀번호 이력 저장 (재사용 불가능하게 막을 수 있음)
    - PASSWORD REUSE INTERVAL : 비번 재사용 금지 기간
    - PASSWORD REQUIRE : 비밀번호 만료시, 현재 비밀번호를 적느냐 마느냐
        - (CURRENT) : 현재 비밀번호 입력
        - (OPTIONAL) : 입력하지 않아도 됨
        - (DEFAULT) : 시스템 변수 참조
    - ACCOUNT LOCK / UNLOCK : 계정 정보 변경하는 와중에 계정사용 가능 여부 결정

## 비밀번호 관리

### 고수준 비밀번호

- 비밀번호 조건에 제약걸 수 있음

### 이중 비밀번호

- 보통 실행되는 와중에 계정정보 변경 불가능하게 설정
    - 서비스를 멈춰야 비밀번호 변경 가능 → 안좋음
- 세컨더리 비밀번호를 만들어, 둘 중 하나만 입력해도 로그인 가능
    - 최근 설정한것이 프라이머리
    - 늦게가 세컨드
    - → 이후에 세컨드를 지우면 비밀번호 변경 완료!

## 권한

- GRANT 를 이용하여 여러 권한 부여가능
    - 정적권한 : 소스코드에 고정된 권한
    - 동적권한 : 플러그인 관련 권한
- 예시
    
    ```sql
    GRANT 권한 ON DB.TABLE TO 유저;
    ```
    
- 글로벌 권한의 경우 테이블이 없기 때문에 **.** 를 사용 (대상이 없을때 늘 사용)
    - 또한 모든 테이블의 의미도 있음
    - 와일드 카드 적용가능

## 역할 (ROLE)

- 권한의 집합
- 역할 활성화 필요
    - 계정 껏다 키면 디폴트로 비활성화
    - 시스템 변수로 늘 활성화 가능
